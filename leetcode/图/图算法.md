<https://labuladong.gitee.io/algo/2/19/>

å›¾çš„å®ç°ï¼š**é‚»æ¥è¡¨** å’Œ **é‚»æ¥çŸ©é˜µ**

![](../images/image_djCOrOldTH.png)

![](../images/image_e3x5sPFkJJ.png)

-   é‚»æ¥è¡¨
    å ç”¨çš„ç©ºé—´å°‘
-   é‚»æ¥çŸ©é˜µ
    å¿«é€Ÿåˆ¤æ–­ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦ç›¸é‚»

### éå†

å›¾å’Œå¤šå‰æ ‘æœ€å¤§çš„åŒºåˆ«æ˜¯ï¼Œå›¾æ˜¯å¯èƒ½åŒ…å«ç¯çš„ï¼Œä½ ä»å›¾çš„æŸä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹éå†ï¼Œæœ‰å¯èƒ½èµ°äº†ä¸€åœˆåˆå›åˆ°è¿™ä¸ªèŠ‚ç‚¹ã€‚

æ‰€ä»¥ï¼Œå¦‚æœå›¾åŒ…å«ç¯ï¼Œéå†æ¡†æ¶å°±è¦ä¸€ä¸ª `visited` æ•°ç»„è¿›è¡Œè¾…åŠ©

#### [797. æ‰€æœ‰å¯èƒ½çš„è·¯å¾„](https://leetcode-cn.com/problems/all-paths-from-source-to-target/ "797. æ‰€æœ‰å¯èƒ½çš„è·¯å¾„")

é¢˜ç›®å·²ç»è¯´æ˜æ˜¯æœ‰å‘æ— ç¯å›¾äº†ï¼Œæ‰€ä»¥å¯ä»¥ çœå»  `visited` æ•°ç»„ã€‚

```python
class Solution:
    def allPathsSourceTarget(self, graph: List[List[int]]) -> List[List[int]]:
        '''
        æœ‰å‘æ— ç¯å›¾çš„éå†
        '''
        res = []
        target = len(graph)
        def get_path(start, path):
            if start == target-1:
                res.append(path + [start])
                return
            
            for v in graph[start]:
                path.append(start) # é€‰æ‹©
                get_path(v, path)
                path.pop(-1) # æ’¤é”€é€‰æ‹©
    
        get_path(0, [])
        return res
```

### ç¯æ£€æµ‹

#### [207. è¯¾ç¨‹è¡¨](https://leetcode-cn.com/problems/course-schedule/ "207. è¯¾ç¨‹è¡¨")

ä»€ä¹ˆæ—¶å€™æ— æ³•ä¿®å®Œæ‰€æœ‰è¯¾ç¨‹ï¼Ÿå½“å­˜åœ¨å¾ªç¯ä¾èµ–çš„æ—¶å€™ã€‚

**çœ‹åˆ°ä¾èµ–é—®é¢˜ï¼Œé¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯æŠŠé—®é¢˜è½¬åŒ–æˆã€Œæœ‰å‘å›¾ã€è¿™ç§æ•°æ®ç»“æ„ï¼Œåªè¦å›¾ä¸­å­˜åœ¨ç¯ï¼Œé‚£å°±è¯´æ˜å­˜åœ¨å¾ªç¯ä¾èµ–**ã€‚

-   æ·±åº¦ä¼˜å…ˆéå†
    ```python
    class Solution:
        def canFinish(self, numCourses: int, prerequisites: List[List[int]]) -> bool:
            edges = collections.defaultdict(list)
            visited = [0] * numCourses
            result = list()
            valid = True

            # å»ºç«‹é‚»æ¥è¡¨
            for info in prerequisites:
                edges[info[1]].append(info[0])
            
            def dfs(u: int):
                # nonlocalå£°æ˜çš„å˜é‡ä¸æ˜¯å±€éƒ¨å˜é‡,ä¹Ÿä¸æ˜¯å…¨å±€å˜é‡,è€Œæ˜¯å¤–éƒ¨åµŒå¥—å‡½æ•°å†…çš„å˜é‡ã€‚
                nonlocal valid 
                visited[u] = 1
                for v in edges[u]:
                    if visited[v] == 0:
                        dfs(v)
                        if valid == False:
                            return
                    elif visited[v] == 1:
                        valid = False  # è®¿é—®åˆ°ç¯äº†
                        return
                visited[u] = 2
                result.append(u)
            
            # éå†æ‰€æœ‰èŠ‚ç‚¹
            for i in range(numCourses):
                if valid and not visited[i]:
                    dfs(i)
            
            return valid
    ```
    æ—¶é—´å¤æ‚åº¦: $O(n+m)$ï¼Œå…¶ä¸­ n ä¸ºè¯¾ç¨‹æ•°ï¼Œm ä¸ºå…ˆä¿®è¯¾ç¨‹çš„è¦æ±‚æ•°ã€‚è¿™å…¶å®å°±æ˜¯å¯¹å›¾è¿›è¡Œæ·±åº¦ä¼˜å…ˆæœç´¢çš„æ—¶é—´å¤æ‚åº¦ã€‚

    ç©ºé—´å¤æ‚åº¦: $O(n+m)$ã€‚é¢˜ç›®ä¸­æ˜¯ä»¥åˆ—è¡¨å½¢å¼ç»™å‡ºçš„å…ˆä¿®è¯¾ç¨‹å…³ç³»ï¼Œä¸ºäº†å¯¹å›¾è¿›è¡Œæ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œæˆ‘ä»¬éœ€è¦å­˜å‚¨æˆé‚»æ¥è¡¨çš„å½¢å¼ï¼Œç©ºé—´å¤æ‚åº¦ä¸º $O(n+m)$ã€‚åœ¨æ·±åº¦ä¼˜å…ˆæœç´¢çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æœ€å¤š O(n) çš„æ ˆç©ºé—´ï¼ˆé€’å½’ï¼‰è¿›è¡Œæ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œå› æ­¤æ€»ç©ºé—´å¤æ‚åº¦ä¸º $O(n+m)$ã€‚
-   å¹¿åº¦ä¼˜å…ˆéå†

    æ·±åº¦ä¼˜å…ˆæœç´¢æ˜¯ä¸€ç§ã€Œé€†å‘æ€ç»´ã€ï¼šæœ€å…ˆè¢«æ”¾å…¥æ ˆä¸­çš„èŠ‚ç‚¹æ˜¯åœ¨æ‹“æ‰‘æ’åºä¸­æœ€åé¢çš„èŠ‚ç‚¹ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨æ­£å‘æ€ç»´ï¼Œé¡ºåºåœ°ç”Ÿæˆæ‹“æ‰‘æ’åºï¼Œè¿™ç§æ–¹æ³•ä¹Ÿæ›´åŠ ç›´è§‚ã€‚

    æˆ‘ä»¬è€ƒè™‘æ‹“æ‰‘æ’åºä¸­æœ€å‰é¢çš„èŠ‚ç‚¹ï¼Œè¯¥èŠ‚ç‚¹ä¸€å®šä¸ä¼šæœ‰ä»»ä½•å…¥è¾¹ï¼Œä¹Ÿå°±æ˜¯å®ƒæ²¡æœ‰ä»»ä½•çš„å…ˆä¿®è¯¾ç¨‹è¦æ±‚ã€‚å½“æˆ‘ä»¬å°†ä¸€ä¸ªèŠ‚ç‚¹åŠ å…¥ç­”æ¡ˆä¸­åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç§»é™¤å®ƒçš„æ‰€æœ‰å‡ºè¾¹ï¼Œä»£è¡¨ç€å®ƒçš„ç›¸é‚»èŠ‚ç‚¹å°‘äº†ä¸€é—¨å…ˆä¿®è¯¾ç¨‹çš„è¦æ±‚ã€‚**å¦‚æœæŸä¸ªç›¸é‚»èŠ‚ç‚¹å˜æˆäº†ã€Œæ²¡æœ‰ä»»ä½•å…¥è¾¹çš„èŠ‚ç‚¹ã€ï¼Œé‚£ä¹ˆå°±ä»£è¡¨ç€è¿™é—¨è¯¾å¯ä»¥å¼€å§‹å­¦ä¹ äº†**ã€‚æŒ‰ç…§è¿™æ ·çš„æµç¨‹ï¼Œæˆ‘ä»¬ä¸æ–­åœ°å°†æ²¡æœ‰å…¥è¾¹çš„èŠ‚ç‚¹åŠ å…¥ç­”æ¡ˆï¼Œç›´åˆ°ç­”æ¡ˆä¸­åŒ…å«æ‰€æœ‰çš„èŠ‚ç‚¹ï¼ˆå¾—åˆ°äº†ä¸€ç§æ‹“æ‰‘æ’åºï¼‰æˆ–è€…ä¸å­˜åœ¨æ²¡æœ‰å…¥è¾¹çš„èŠ‚ç‚¹ï¼ˆå›¾ä¸­åŒ…å«ç¯ï¼‰ã€‚

    ä¸Šé¢çš„æƒ³æ³•ç±»ä¼¼äºå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†å¹¿åº¦ä¼˜å…ˆæœç´¢çš„æµç¨‹ä¸æ‹“æ‰‘æ’åºçš„æ±‚è§£è”ç³»èµ·æ¥ã€‚
    ```python
    class Solution:
        def canFinish(self, numCourses: int, prerequisites: List[List[int]]) -> bool:
            edges = collections.defaultdict(list)
            indeg = [0] * numCourses

            for info in prerequisites:
                edges[info[1]].append(info[0])
                indeg[info[0]] += 1   # ä¿®è¯¥è¯¾æ—¶ï¼Œéœ€è¦é€‰ä¿®å‡ é—¨è¯¾ï¼ˆå…¥åº¦ï¼‰
            
            # ä»ä¸éœ€è¦å¿…ä¿®è¯¾çš„è¯¾ç¨‹å¼€å§‹ï¼ˆå…¥åº¦ä¸º0ï¼‰
            q = collections.deque([u for u in range(numCourses) if indeg[u] == 0])
            visited = 0

            while q:
                visited += 1
                u = q.popleft()
                for v in edges[u]:
                    indeg[v] -= 1
                    if indeg[v] == 0:
                        q.append(v)

            return visited == numCourses
    ```
    æ—¶é—´å¤æ‚åº¦: O(n+m)ï¼Œå…¶ä¸­ nä¸ºè¯¾ç¨‹æ•°ï¼Œmä¸ºå…ˆä¿®è¯¾ç¨‹çš„è¦æ±‚æ•°ã€‚è¿™å…¶å®å°±æ˜¯å¯¹å›¾è¿›è¡Œå¹¿åº¦ä¼˜å…ˆæœç´¢çš„æ—¶é—´å¤æ‚åº¦ã€‚

    ç©ºé—´å¤æ‚åº¦: O(n+m)ã€‚é¢˜ç›®ä¸­æ˜¯ä»¥åˆ—è¡¨å½¢å¼ç»™å‡ºçš„å…ˆä¿®è¯¾ç¨‹å…³ç³»ï¼Œä¸ºäº†å¯¹å›¾è¿›è¡Œå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼Œæˆ‘ä»¬éœ€è¦å­˜å‚¨æˆé‚»æ¥è¡¨çš„å½¢å¼ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(n+m)ã€‚åœ¨å¹¿åº¦ä¼˜å…ˆæœç´¢çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æœ€å¤š O(n) çš„é˜Ÿåˆ—ç©ºé—´ï¼ˆè¿­ä»£ï¼‰è¿›è¡Œå¹¿åº¦ä¼˜å…ˆæœç´¢ã€‚å› æ­¤æ€»ç©ºé—´å¤æ‚åº¦ä¸º O(n+m)ã€‚

### æ‹“æ‰‘æ’åºï¼ˆTopological Sortingï¼‰

#### [210. è¯¾ç¨‹è¡¨ II](https://leetcode-cn.com/problems/course-schedule-ii/ "210. è¯¾ç¨‹è¡¨ II")

é¢˜ç›®æè¿°ï¼šä¸Šé¢˜åªéœ€è¦åˆ¤æ–­èƒ½ä¸èƒ½ï¼Œæœ¬é¢˜éœ€è¦è¾“å‡º å­¦ä¹ è·¯å¾„

-   æ·±åº¦ä¼˜å…ˆéå†
    ```python
    class Solution:
        def findOrder(self, numCourses: int, prerequisites: List[List[int]]) -> List[int]:
            # å­˜å‚¨æœ‰å‘å›¾
            edges = collections.defaultdict(list)
            # æ ‡è®°æ¯ä¸ªèŠ‚ç‚¹çš„çŠ¶æ€ï¼š0=æœªæœç´¢ï¼Œ1=æœç´¢ä¸­ï¼Œ2=å·²å®Œæˆ
            visited = [0] * numCourses
            # ç”¨æ•°ç»„æ¥æ¨¡æ‹Ÿæ ˆï¼Œä¸‹æ ‡ 0 ä¸ºæ ˆåº•ï¼Œn-1 ä¸ºæ ˆé¡¶
            result = list()
            # åˆ¤æ–­æœ‰å‘å›¾ä¸­æ˜¯å¦æœ‰ç¯
            valid = True

            for info in prerequisites:
                edges[info[1]].append(info[0])
            
            def dfs(u: int):
                nonlocal valid
                # å°†èŠ‚ç‚¹æ ‡è®°ä¸ºã€Œæœç´¢ä¸­ã€
                visited[u] = 1
                
                for v in edges[u]:
                    if visited[v] == 0:
                        dfs(v)
                        if not valid: # å‘ç°æœ‰ç¯ï¼Œç«‹å³åœæ­¢æœç´¢
                            return
                    elif visited[v] == 1:  # æ‰¾åˆ°ç¯äº†
                        valid = False
                        return
                # å°†èŠ‚ç‚¹æ ‡è®°ä¸ºã€Œå·²å®Œæˆã€
                visited[u] = 2
                # å°†èŠ‚ç‚¹å…¥æ ˆ
                result.append(u)    # å’Œä¸Šé¢˜ç›¸æ¯”çš„å…³é”®ç‚¹ï¼Œä¿å­˜è®¿é—®è·¯å¾„
            
            # æ¯æ¬¡æŒ‘é€‰ä¸€ä¸ªã€Œæœªæœç´¢ã€çš„èŠ‚ç‚¹ï¼Œå¼€å§‹è¿›è¡Œæ·±åº¦ä¼˜å…ˆæœç´¢
            for i in range(numCourses):
                if valid and not visited[i]:
                    dfs(i)
            
            if not valid:
                return list()
            
            # å¦‚æœæ²¡æœ‰ç¯ï¼Œé‚£ä¹ˆå°±æœ‰æ‹“æ‰‘æ’åº
            # æ³¨æ„ä¸‹æ ‡ 0 ä¸ºæ ˆåº•ï¼Œå› æ­¤éœ€è¦å°†æ•°ç»„ååºè¾“å‡º
            return result[::-1]

    ```
-   å¹¿åº¦ä¼˜å…ˆéå†
    ```python
    class Solution:
        def findOrder(self, numCourses: int, prerequisites: List[List[int]]) -> List[int]:
            # å­˜å‚¨æœ‰å‘å›¾
            edges = collections.defaultdict(list)
            # å­˜å‚¨æ¯ä¸ªèŠ‚ç‚¹çš„å…¥åº¦
            indeg = [0] * numCourses
            # å­˜å‚¨ç­”æ¡ˆ
            result = list()

            for info in prerequisites:
                edges[info[1]].append(info[0])
                indeg[info[0]] += 1
            
            # å°†æ‰€æœ‰å…¥åº¦ä¸º 0 çš„èŠ‚ç‚¹æ”¾å…¥é˜Ÿåˆ—ä¸­
            q = collections.deque([u for u in range(numCourses) if indeg[u] == 0])

            while q:
                u = q.popleft()
                result.append(u)  # å’Œä¸Šé¢˜ç›¸æ¯”çš„å…³é”®ç‚¹ï¼Œä¿å­˜è®¿é—®è·¯å¾„
                for v in edges[u]:
                    indeg[v] -= 1
                    # å¦‚æœç›¸é‚»èŠ‚ç‚¹ v çš„å…¥åº¦ä¸º 0ï¼Œå°±å¯ä»¥é€‰ v å¯¹åº”çš„è¯¾ç¨‹äº†
                    if indeg[v] == 0:
                        q.append(v)

            if len(result) != numCourses:
                result = list()
            return result

    ```

### äºŒåˆ†å›¾åˆ¤å®š

> äºŒåˆ†å›¾çš„é¡¶ç‚¹é›†å¯åˆ†å‰²ä¸ºä¸¤ä¸ªäº’ä¸ç›¸äº¤çš„å­é›†ï¼Œå›¾ä¸­æ¯æ¡è¾¹ä¾é™„çš„ä¸¤ä¸ªé¡¶ç‚¹éƒ½åˆ†å±äºè¿™ä¸¤ä¸ªå­é›†ï¼Œä¸”ä¸¤ä¸ªå­é›†å†…çš„é¡¶ç‚¹ä¸ç›¸é‚»ã€‚

> ğŸ“Œ**ç»™ä½ ä¸€å¹…ã€Œå›¾ã€ï¼Œè¯·ä½ ç”¨ä¸¤ç§é¢œè‰²å°†å›¾ä¸­çš„æ‰€æœ‰é¡¶ç‚¹ç€è‰²ï¼Œä¸”ä½¿å¾—ä»»æ„ä¸€æ¡è¾¹çš„ä¸¤ä¸ªç«¯ç‚¹çš„é¢œè‰²éƒ½ä¸ç›¸åŒï¼Œä½ èƒ½åšåˆ°å—**ï¼Ÿ
>
> è¿™å°±æ˜¯å›¾çš„ã€ŒåŒè‰²é—®é¢˜ã€ï¼Œå…¶å®è¿™ä¸ªé—®é¢˜å°±ç­‰åŒäºäºŒåˆ†å›¾çš„åˆ¤å®šé—®é¢˜ï¼Œå¦‚æœä½ èƒ½å¤ŸæˆåŠŸåœ°å°†å›¾æŸ“è‰²ï¼Œé‚£ä¹ˆè¿™å¹…å›¾å°±æ˜¯ä¸€å¹…äºŒåˆ†å›¾ï¼Œåä¹‹åˆ™ä¸æ˜¯ã€‚

#### [785. åˆ¤æ–­äºŒåˆ†å›¾ï¼ˆä¸­ç­‰ï¼‰](https://leetcode-cn.com/problems/is-graph-bipartite "785. åˆ¤æ–­äºŒåˆ†å›¾ï¼ˆä¸­ç­‰ï¼‰")

[886. å¯èƒ½çš„äºŒåˆ†æ³•ï¼ˆä¸­ç­‰ï¼‰](https://leetcode-cn.com/problems/possible-bipartition "886. å¯èƒ½çš„äºŒåˆ†æ³•ï¼ˆä¸­ç­‰ï¼‰")

### å¹¶æŸ¥é›†ç®—æ³•è®¡ç®—è¿é€šåˆ†é‡

#### [323. æ— å‘å›¾ä¸­çš„è¿é€šåˆ†é‡æ•°ç›®](https://leetcode-cn.com/problems/number-of-connected-components-in-an-undirected-graph/ "323. æ— å‘å›¾ä¸­çš„è¿é€šåˆ†é‡æ•°ç›®")

#### [130. è¢«å›´ç»•çš„åŒºåŸŸ](https://leetcode-cn.com/problems/surrounded-regions/ "130. è¢«å›´ç»•çš„åŒºåŸŸ")

#### [990. ç­‰å¼æ–¹ç¨‹çš„å¯æ»¡è¶³æ€§](https://leetcode-cn.com/problems/satisfiability-of-equality-equations/ "990. ç­‰å¼æ–¹ç¨‹çš„å¯æ»¡è¶³æ€§")

### æœ€å°ç”Ÿæˆæ ‘ï¼ˆMinimum Spanning Treeï¼‰

æœ€å°ç”Ÿæˆæ ‘ç®—æ³•ä¸»è¦æœ‰ Prim ç®—æ³•ï¼ˆæ™®é‡Œå§†ç®—æ³•ï¼‰å’Œ Kruskal ç®—æ³•ï¼ˆå…‹é²æ–¯å¡å°”ç®—æ³•ï¼‰ä¸¤ç§ï¼Œè¿™ä¸¤ç§ç®—æ³•è™½ç„¶éƒ½è¿ç”¨äº†è´ªå¿ƒæ€æƒ³ï¼Œä½†ä»å®ç°ä¸Šæ¥è¯´å·®å¼‚è¿˜æ˜¯è›®å¤§çš„ã€‚
**Kruskal ç®—æ³•å…¶å®å¾ˆå®¹æ˜“ç†è§£å’Œè®°å¿†ï¼Œå…¶å…³é”®æ˜¯è¦ç†Ÿæ‚‰å¹¶æŸ¥é›†ç®—æ³•ã€‚**

#### [261. ä»¥å›¾åˆ¤æ ‘](https://leetcode-cn.com/problems/graph-valid-tree/ "261. ä»¥å›¾åˆ¤æ ‘")

#### [1135. æœ€ä½æˆæœ¬è”é€šæ‰€æœ‰åŸå¸‚](https://leetcode-cn.com/problems/connecting-cities-with-minimum-cost/ "1135. æœ€ä½æˆæœ¬è”é€šæ‰€æœ‰åŸå¸‚")

#### [1584. è¿æ¥æ‰€æœ‰ç‚¹çš„æœ€å°è´¹ç”¨](https://leetcode-cn.com/problems/min-cost-to-connect-all-points/ "1584. è¿æ¥æ‰€æœ‰ç‚¹çš„æœ€å°è´¹ç”¨")

***

ä¸‹é¢æ˜¯Prim ç®—æ³•çš„ç»ƒæ‰‹é¢˜

#### [1135. æœ€ä½æˆæœ¬è”é€šæ‰€æœ‰åŸå¸‚](https://leetcode-cn.com/problems/connecting-cities-with-minimum-cost/ "1135. æœ€ä½æˆæœ¬è”é€šæ‰€æœ‰åŸå¸‚")

#### [1584. è¿æ¥æ‰€æœ‰ç‚¹çš„æœ€å°è´¹ç”¨](https://leetcode-cn.com/problems/min-cost-to-connect-all-points/ "1584. è¿æ¥æ‰€æœ‰ç‚¹çš„æœ€å°è´¹ç”¨")

### åæµé—®é¢˜

#### [277. æœç´¢åäºº](https://leetcode-cn.com/problems/find-the-celebrity/ "277. æœç´¢åäºº")

### Dijkstraæœ€çŸ­è·¯å¾„ç®—æ³•

#### [743. ç½‘ç»œå»¶è¿Ÿæ—¶é—´](https://leetcode-cn.com/problems/network-delay-time "743. ç½‘ç»œå»¶è¿Ÿæ—¶é—´")

#### [1514. æ¦‚ç‡æœ€å¤§çš„è·¯å¾„](https://leetcode-cn.com/problems/path-with-maximum-probability "1514. æ¦‚ç‡æœ€å¤§çš„è·¯å¾„")

#### [1631. æœ€å°ä½“åŠ›æ¶ˆè€—è·¯å¾„](https://leetcode-cn.com/problems/path-with-minimum-effort "1631. æœ€å°ä½“åŠ›æ¶ˆè€—è·¯å¾„")
