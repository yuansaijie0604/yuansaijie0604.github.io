
<https://programmercarl.com/åŠ¨æ€è§„åˆ’-è‚¡ç¥¨é—®é¢˜æ€»ç»“ç¯‡.html>

| é¢˜ç›®                                                                                                           | å†…å®¹                                     |
|--------------------------------------------------------------------------------------------------------------|----------------------------------------|
| [121. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº](https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock/)                          | åªèƒ½ä¸€ç¬”äº¤æ˜“                                 |
| [122. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II](https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-ii/)                    | äº¤æ˜“æ¬¡æ•°ä¸é™ ã€è´ªå¿ƒã€‘                            |
| [123. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº III](https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-iii/)                  | æœ€å¤šå¯ä»¥å®Œæˆ ä¸¤ç¬” äº¤æ˜“                           |
| [188. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IV](https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-iv/)                    | ğŸ˜Š æœ€å¤šå¯ä»¥å®Œæˆ k ç¬”äº¤æ˜“                        |
| [309. æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸ](https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-with-cooldown/)         | ã€122ã€‘åŸºç¡€ä¸Šï¼Œå–å‡ºè‚¡ç¥¨åï¼Œä½ æ— æ³•åœ¨ç¬¬äºŒå¤©ä¹°å…¥è‚¡ç¥¨ (å³å†·å†»æœŸä¸º 1 å¤©) |
| [714. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹](https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/) | ã€122ã€‘åŸºç¡€ä¸Šï¼Œæ¯ç¬”äº¤æ˜“éƒ½éœ€è¦ä»˜æ‰‹ç»­è´¹fee                |

## 121. åªèƒ½ä¸€ç¬”äº¤æ˜“

```python
class Solution:
    def maxProfit(self, prices: List[int]) -> int:
        if not prices: return 0
        """
        åŠ¨æ€è§„åˆ’ï¼šåœ¨ç¬¬iå¤©å–å‡ºæ—¶çš„æœ€å¤§æ”¶ç›Š
        """
        # dptable = [0] * len(prices)
        # minprice = prices[0]
        # for i in range(1, len(prices)):
        #     if prices[i] < minprice:
        #         minprice = prices[i]
        #     dptable[i] = max(dptable[i-1], prices[i]-minprice)
        # return dptable[-1]

        """
        çŠ¶æ€å‹ç¼©ï¼šåªå’Œå‰é¢çš„ä¸€ä¸ªçŠ¶æ€æœ‰å…³
        """
        minprice = prices[0]
        res = 0
        for i in range(1, len(prices)):
            if prices[i] < minprice:
                minprice = prices[i]
            else:
                res = max(res, prices[i] - minprice)
        return res
```

## 123. æœ€å¤šä¸¤æ¬¡äº¤æ˜“

```python
class Solution:
    def maxProfit(self, prices: List[int]) -> int:
        if not prices: return 0
        """
        äº”ç§çŠ¶æ€ï¼š
        1.æœªè¿›è¡Œè¿‡ä»»ä½•æ“ä½œï¼›
        2.åªè¿›è¡Œè¿‡ä¸€æ¬¡ä¹°æ“ä½œï¼›
        3.è¿›è¡Œäº†ä¸€æ¬¡ä¹°æ“ä½œå’Œä¸€æ¬¡å–æ“ä½œï¼Œå³å®Œæˆäº†ä¸€ç¬”äº¤æ˜“ï¼›
        4.åœ¨å®Œæˆäº†ä¸€ç¬”äº¤æ˜“çš„å‰æä¸‹ï¼Œè¿›è¡Œäº†ç¬¬äºŒæ¬¡ä¹°æ“ä½œï¼›
        5.å®Œæˆäº†å…¨éƒ¨ä¸¤ç¬”äº¤æ˜“ã€‚
        æ³¨æ„ï¼šåœ¨åŒä¸€å¤©ä¹°å…¥åˆå–å‡ºï¼Œå¯¹ç­”æ¡ˆæ²¡æœ‰å½±å“ï¼Œæ‰€ä»¥å¾ªç¯å†…ç›´æ¥ä½¿ç”¨å˜é‡
        """
        buy1 = buy2 = -prices[0]
        sell1 = sell2 = 0
        for i in range(1, len(prices)):
            buy1 = max(buy1, -prices[i])
            sell1 = max(sell1, buy1+prices[i])
            buy2 = max(buy2, sell1-prices[i])
            sell2 = max(sell2, buy2 + prices[i])
        return sell2
```

## 188. æœ€å¤škç¬”äº¤æ˜“

```python
class Solution:
    def maxProfit(self, k: int, prices: List[int]) -> int:
        if not prices: return 0

        """
        buy: åœ¨ç¬¬iå¤©æ—¶ï¼Œè¿›è¡Œäº†jç¬”äº¤æ˜“ï¼Œå¹¶æ‰‹ä¸Šæœ‰è‚¡ç¥¨
        sell: åœ¨ç¬¬iå¤©æ—¶ï¼Œè¿›è¡Œäº†jç¬”äº¤æ˜“ï¼Œå¹¶æ‰‹ä¸Šæ— è‚¡ç¥¨
        """
        k = min(k, len(prices)//2) # æœ€å¤šè¿›è¡Œn/2æ¬¡äº¤æ˜“
        buy = [[0]*(k+1) for _ in range(len(prices))]
        sell = [[0]*(k+1) for _ in range(len(prices))]
        buy[0][0] = -prices[0]
        for i in range(1, k+1):
            sell[0][i] = buy[0][i] = float('-inf')
        
        for i in range(1, len(prices)):
            buy[i][0] = max(buy[i-1][0], sell[i-1][0] - prices[i])
            for j in range(1, k+1):
                buy[i][j] = max(buy[i-1][j], sell[i-1][j] - prices[i])
                sell[i][j] = max(sell[i-1][j], buy[i-1][j-1] + prices[i])

        return max(sell[len(prices)-1])

        """
        çŠ¶æ€å‹ç¼©
        """
        k = min(k, len(prices)//2) # æœ€å¤šè¿›è¡Œn/2æ¬¡äº¤æ˜“
        buy = [0]*(k+1) 
        sell = [0]*(k+1) 
        buy[0] = -prices[0]
        for i in range(1, k+1):
            sell[i] = buy[i] = float('-inf')
        
        for i in range(1, len(prices)):
            buy[0] = max(buy[0], sell[0] - prices[i])
            for j in range(1, k+1):
                buy[j] = max(buy[j], sell[j] - prices[i])
                sell[j] = max(sell[j], buy[j-1] + prices[i])
        
        return max(sell)
```

## 122. ä¸é™äº¤æ˜“æ¬¡æ•°

```python
class Solution:
    def maxProfit(self, prices: List[int]) -> int:
        """
        åŠ¨æ€è§„åˆ’: ç¬¬iå¤©æ‰‹é‡Œ æœ‰è‚¡ç¥¨/æ— è‚¡ç¥¨ æ—¶çš„æœ€å¤§åˆ©æ¶¦
        ç¬¬iå¤©çš„æ— è‚¡ç¥¨æœ€å¤§åˆ©æ¶¦ï¼ši-1å¤©æ‰‹ä¸­æ— è‚¡ç¥¨æœ€å¤§åˆ©æ¶¦+å½“å¤©æ²¡åŠ¨ 
                             i-1å¤©æ‰‹ä¸­æœ‰è‚¡ç¥¨æœ€å¤§åˆ©æ¶¦+ä»Šå¤©å–å‡º
        ç¬¬iå¤©çš„æœ‰è‚¡ç¥¨æœ€å¤§åˆ©æ¶¦ï¼ši-1å¤©æ‰‹ä¸­æœ‰è‚¡ç¥¨æœ€å¤§åˆ©æ¶¦+å½“å¤©æ²¡åŠ¨ 
                             i-1å¤©æ‰‹ä¸­æ— è‚¡ç¥¨æœ€å¤§åˆ©æ¶¦+ä»Šå¤©å–å…¥
        """
        dptable = [[0] * 2 for _ in range(len(prices))]
        dptable[0][1] = -prices[0]
        for i in range(1, len(prices)):
            dptable[i][0] = max(dptable[i-1][0], dptable[i-1][1] + prices[i])
            dptable[i][1] = max(dptable[i-1][1], dptable[i-1][0] - prices[i])
        
        return dptable[len(prices)-1][0]

        """
        çŠ¶æ€å‹ç¼©ï¼šå½“å‰çŠ¶æ€ä»…ä¸å‰ä¸€å¤©çš„ä¸¤ä¸ªçŠ¶æ€æœ‰å…³
        """
        dp0, dp1 = 0, -prices[0]
        for i in range(1, len(prices)):
            x1 = max(dp0, dp1 + prices[i])
            x0 = max(dp1, dp0 - prices[i])
            dp0, dp1 = x1, x0
        return dp0

        """
        è´ªå¿ƒï¼šå¯»æ‰¾ä¸ç›¸äº¤(i,k]åŒºé—´çš„æœ€å¤§å’Œ
        åªèƒ½è®¡ç®—æœ€å¤§åˆ©æ¶¦ï¼Œè®¡ç®—çš„è¿‡ç¨‹ä¸ä»£è¡¨å®é™…äº¤æ˜“
        """
        ans = 0
        for i in range(1, len(prices)):
            ans += max(0, prices[i] - prices[i - 1])
        return ans
```

## 309. å†·å†»æœŸ

```python
class Solution:
    def maxProfit(self, prices: List[int]) -> int:
        """
        åŠ¨æ€è§„åˆ’: ç¬¬iå¤©æ‰‹é‡Œ æ— è‚¡ç¥¨éå†·å†»æœŸ/æœ‰è‚¡ç¥¨/æ— è‚¡ç¥¨å†·å†»æœŸ æ—¶çš„æœ€å¤§åˆ©æ¶¦
        """
        dptable = [[0] * 3 for _ in range(len(prices))]
        dptable[0][1] = -prices[0]
        for i in range(1, len(prices)):
            # å‰ä¸€å¤©æ— è‚¡ç¥¨éå†·å†»æœŸ or å‰ä¸€å¤©æ— è‚¡ç¥¨å†·å†»æœŸ
            dptable[i][0] = max(dptable[i-1][0], dptable[i-1][2])
            # å‰ä¸€å¤©æ‰‹é‡Œæœ‰è‚¡ç¥¨ or å‰ä¸€å¤©éå†·å†»æœŸï¼Œä»Šå¤©ä¹°å…¥äº†
            dptable[i][1] = max(dptable[i-1][1], dptable[i-1][0] - prices[i])
            # åªèƒ½æ˜¯å‰ä¸€å¤©æ‰‹é‡Œæœ‰è‚¡ç¥¨ï¼Œä»Šå¤©å–å‡ºäº†
            dptable[i][2] = dptable[i-1][1] + prices[i]
        
        return max(dptable[len(prices)-1][0], dptable[len(prices)-1][2])

        """
        çŠ¶æ€å‹ç¼©
        """
        dptable = [0] * 3
        dptable[1] = -prices[0]
        for i in range(1, len(prices)):
            a = max(dptable[0], dptable[2])
            b = max(dptable[1], dptable[0] - prices[i])
            c = dptable[1] + prices[i]
            dptable = [a,b,c]

        return max(dptable[0], dptable[2])
```

## 714. æ‰‹ç»­è´¹

```python
class Solution:
    def maxProfit(self, prices: List[int], fee: int) -> int:
        if not prices: return 0
        """
        åŠ¨æ€è§„åˆ’: ç¬¬iå¤©æ‰‹é‡Œ æ— è‚¡ç¥¨/æœ‰è‚¡ç¥¨ æ—¶çš„æœ€å¤§åˆ©æ¶¦
        ç¬¬iå¤©çš„æ— è‚¡ç¥¨æœ€å¤§åˆ©æ¶¦ï¼ši-1å¤©æ‰‹ä¸­æ— è‚¡ç¥¨æœ€å¤§åˆ©æ¶¦+å½“å¤©æ²¡åŠ¨ 
                            i-1å¤©æ‰‹ä¸­æœ‰è‚¡ç¥¨æœ€å¤§åˆ©æ¶¦+ä»Šå¤©å–å‡º
        ç¬¬iå¤©çš„æœ‰è‚¡ç¥¨æœ€å¤§åˆ©æ¶¦ï¼ši-1å¤©æ‰‹ä¸­æœ‰è‚¡ç¥¨æœ€å¤§åˆ©æ¶¦+å½“å¤©æ²¡åŠ¨ 
                            i-1å¤©æ‰‹ä¸­æ— è‚¡ç¥¨æœ€å¤§åˆ©æ¶¦+ä»Šå¤©å–å…¥
        """
        dptable = [[0] * 2 for _ in range(len(prices))]
        dptable[0][1] = -prices[0]
        for i in range(1, len(prices)):
            dptable[i][0] = max(dptable[i-1][0], dptable[i-1][1] + prices[i] - fee)
            dptable[i][1] = max(dptable[i-1][1], dptable[i-1][0] - prices[i])
        
        return dptable[len(prices)-1][0]

        """
        çŠ¶æ€å‹ç¼©ï¼šå½“å‰çŠ¶æ€ä»…ä¸å‰ä¸€å¤©çš„ä¸¤ä¸ªçŠ¶æ€æœ‰å…³
        """
        dp0, dp1 = 0, -prices[0]
        for i in range(1, len(prices)):
            x1 = max(dp0, dp1 + prices[i] - fee)
            x0 = max(dp1, dp0 - prices[i])
            dp0, dp1 = x1, x0
        return dp0
```
